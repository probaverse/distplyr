---
title: "Parametric Distributions"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Parametric Distributions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

**THIS IS NOT ACTUALIZED DOCUMENTATION, BUT RATHER A VISION SCRIPT TO GUIDE DEVELOPMENT AND IDEAS FOR THE TIME BEING.**

When specifying a parametric distribution in `distplyr`, it helps to distinguish between a parametric _family_ of distributions, and a parametric distribution itself. What is commonly referred to as "the Normal distribution", for example, is actually a family of distributions spanning two parameters: its mean and variance.

In practice, we often would like to resolve these parameters in a stepwise manner. For example, consider a game in which each individual has a certain probability of winning. Here are the probabilities of 100 people:

```{r, echo = FALSE}
set.seed(3)
y <- rbeta(100, 4, 4)
```


```{r, fig.width = 5, fig.height = 3}
plot(y)
```

In an effort to predict a new individual's probability of winning, you are primarily interested in estimating the median. Secondarily, you'd like to construct prediction intervals using a beta distribution approximation, but are not willing to make that approximation to estimate the median. 

1. You estimate the median using the 0.5-quantile estimate:

```{r}
(med <- median(y))
```

2. You want to fit a beta distribution to the data, under the restriction that is has this median. You can set up a family:

```{r}
fam <- dst_beta() %>% 
	set_median(med)
```

Now that one of the two parameters of the Beta family are set, one more remains. Note that it's OK that the median is not one of the "canonical" parameters of the Beta distribution, which are usually denoted $\alpha$ and $\beta$. Either way, notice how now the parameters of the distribution are changed to $\alpha$ and the median:

```{r}
parameters(fam)
#> alpha     median 
#>    NA  0.5071824 
```

**QUESTIONABLE WHETHER ANY OF THE REPARAMETERIZATION BELOW IS USEFUL**


If you want, you can reparameterize the distribution by $\beta$ instead:

```{r}
fam %>% 
	swap_parameters(beta = alpha) %>% 
	parameters()
#> beta     median 
#>   NA  0.5071824 
```

Or by the variance:

```{r}
fam %>% 
	swap_parameters(variance = alpha) %>% 
	parameters()
#> variance     median 
#>       NA  0.5071824 
```

Or by something entirely of your choosing:

```{r}
fam %>% 
	mutate_parameters(gamma = sqrt(alpha) + 5) %>% 
	parameters()
#> gamma     median 
#>    NA  0.5071824 
```

This works so long as the parameters being swapped are modular (?). Try to find a value of beta to use in place of the median, and you won't be able to find one, because fixing beta at a certain value will not guarantee that the median remains:

```{r}
fam %>% 
	swap_parameters(beta = median)
#> Error: median does not map directly to beta.
```

Now, with a parametric family identified, you can use a downstream package to find the MLE of the remaining parameter:

```{r}
mle(y, family = fam)
```

Or, you may wish to take a moment-approach and set the variance to be the sample variance:

```{r}
my_dst <- fam %>% 
	set_variance(var(y))
```

Here are the parameters of `my_dst`:

```{r}
parameters(my_dst)
#> variance     median 
#> ...          0.5071824 
```

Which, you could specify in terms of different parameters:

```{r}
swap_parameters(my_dst, alpha = variance, beta = median)
#> alpha     beta 
#> ...       ...
```





