<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vision • distplyr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Vision">
<meta property="og:description" content="distplyr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163983022-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-163983022-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">distplyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/creating.html">Creating a Distribution</a>
    </li>
    <li>
      <a href="../articles/manipulating.html">Manipulating Distributions</a>
    </li>
    <li>
      <a href="../articles/probing.html">Probing a Distribution</a>
    </li>
    <li>
      <a href="../articles/vision.html">Vision</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/vincenzocoia/distplyr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="vision_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Vision</h1>
            
      
      
      <div class="hidden name"><code>vision.Rmd</code></div>

    </div>

    
    
<p><code>distplyr</code> is still in its infancy, but it has an ambitious vision. To truly empower the analyst, there are some key functionalities that should be developed:</p>
<ol style="list-style-type: decimal">
<li>Make a new parametric distribution not in <code>distplyr</code>.</li>
<li>Manipulating distributions</li>
<li>Gradually isolate distribution.</li>
</ol>
<p>This page is a vision of <code>distplyr</code> after having achieved these things, written in the form of a vignette. Some of these things might be too ambitious, but I truly think they are possible, and very powerful. If you believe in empowering analysts to seemlessly draw powerful insights using distributions, please consider contributing to this open source project.</p>
<div id="base-distributions-not-included-in-distplyr" class="section level2">
<h2 class="hasAnchor">
<a href="#base-distributions-not-included-in-distplyr" class="anchor"></a>1. Base Distributions not included in <code>distplyr</code>
</h2>
<p>There are plenty of packages that give you access to <code>p/d/q/rfoo()</code> functions for a distribution not contained in base R. distplyr can’t include all of those. When such functions exist, make a distribution using distplyr with <code>as_distribution()</code> followed by parameter specifications:</p>
<pre><code>my_dst &lt;- as_dst("foo", param1 = 3, param2 = 6)</code></pre>
<p>While the above is enough, you might want to consider adding more information. With no knowledge of properties such as mean and variance, these quantities will be computed by their definition, often involving an integral. Instead, you can specify these things using the <code>set_*()</code> functions:</p>
<pre><code>my_dst &lt;- my_dst %&gt;%
  set_mean(param1 / (param1 + param2)) %&gt;% 
  set_variance({
    denominator &lt;- param1 + param
    param1 / denominator
  })</code></pre>
</div>
<div id="transformations" class="section level2">
<h2 class="hasAnchor">
<a href="#transformations" class="anchor"></a>2. Transformations</h2>
<p>It’s important to be able to transform distributions. Simple ones include <code>add_by()</code> and <code><a href="https://magrittr.tidyverse.org/reference/aliases.html">divide_by()</a></code> – better yet, define binary operators for distributions.</p>
<p>For example, here is an empirical distribution of the residuals of a regression model:</p>
<pre><code>model &lt;- lm(mpg ~ I(1 / disp), data = mtcars)
error_dist &lt;-  model %&gt;% 
    residuals() %&gt;% 
    stepdst()</code></pre>
<p>It would be useful to add the mean back in to the error distribution:</p>
<pre><code>broom::augment(model) %&gt;% 
    mutate(dist = map(.fitted, ~ .x + error_dist))</code></pre>
<p>Now the error distribution is non-parametric – useful if you are skeptical of assumptions such as the usual Gaussian assumption.</p>
</div>
<div id="gradually-isolate-a-distribution" class="section level2">
<h2 class="hasAnchor">
<a href="#gradually-isolate-a-distribution" class="anchor"></a>3. Gradually Isolate a Distribution</h2>
<p>It’s useful to gradually isolate a distribution. Consider these use cases.</p>
<p><strong>Example 1</strong></p>
<p>Your client wants you to come up with the best supervised learning model that predicts the mean of Y given X. A secondary goal is to communicate uncertainty in the prediction – you suspect the residuals are lognormal, but don’t want to make that assumption when fitting your baseline model. You’re willing to consider making the second Lognormal parameter constant across X (let’s say this to make this demo simpler).</p>
<p>To find the distribution of the residuals, set a generic Lognormal distribution with unspecified parameters <code>a</code> and <code>b</code>, then set the mean at 0. The remaining parameter can be estimated via maximum likelihood.</p>
<pre><code>res &lt;- dst_lnorm() %&gt;% 
    set_mean(0)
f &lt;- get_density(res)   # Maximize</code></pre>
<p>Notice that neither <code>a</code> nor <code>b</code> is the mean of the distribution, yet we can still restrict this distribution down to a 1-dimensional parameter space.</p>
<p><strong>Example 2</strong></p>
<p>You’re trying to forecast your income, and you know that most of the time you make between 3 and 4 thousand dollars per month. You decide to make this a 90% prediction interval of your income, using a Normal distribution:</p>
<pre><code>dst_norm() %&gt;% 
    set_quantiles(0.05 ~ 3000, 0.95 ~ 4000)</code></pre>
<p>Note that this is different from <code><a href="../reference/set_cdf.html">set_quantile()</a></code>, which sets the entire quantile function (?).</p>
<p><strong>Example 3</strong></p>
<p>Maybe you want a normal distribution that has the same mean and same variance. Although an example like this might not be practical in the univariate setting, it does in the multivariate, where we’d like to set dependence to be equal between two pairs of variables.</p>
<pre><code><a href="../reference/dst_norm.html">dst_norm(a, a)  # Then, resolve via MLE </a></code></pre>
<p><strong>Example 4</strong></p>
<p>You’d like to fit a GPD, and you are confident that the distribution is heavy tailed, so would like the shape parameter to be positive.</p>
<pre><code>dst_gpd() %&gt;% 
   set_parameters(shape &gt; 0)</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://vincenzocoia.com">Vincenzo Coia</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
